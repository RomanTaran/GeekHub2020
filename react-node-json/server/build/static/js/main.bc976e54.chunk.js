(this.webpackJsonptodomvc=this.webpackJsonptodomvc||[]).push([[0],{12:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),l=o(5),c=(o(11),o(3)),i=o(2),s=o(1),r=o.n(s);class d extends a.Component{constructor(...e){super(...e),this.state={text:this.props.text||""},this.handleSubmit=e=>{const t=e.target.value.trim();13===e.which&&(this.props.onSave(t),this.props.newTodo&&this.setState({text:""}))},this.handleChange=e=>{this.setState({text:e.target.value})},this.handleBlur=e=>{this.props.newTodo||this.props.onSave(e.target.value)}}render(){return n.a.createElement("input",{className:r()({edit:this.props.editing,"new-todo":this.props.newTodo}),type:"text",placeholder:this.props.placeholder,autoFocus:!0,value:this.state.text,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleSubmit})}}var p=({addTodo:e})=>n.a.createElement("header",{className:"header"},n.a.createElement("h1",null,"todos"),n.a.createElement(d,{newTodo:!0,onSave:t=>{0!==t.length&&e(t)},placeholder:"What needs to be done?"}));const h={show_all:"All",show_active:"Active",show_completed:"Completed"};var m=({visibilityFilter:e,activeCount:t,completedCount:o,setFilter:a,clearCompleted:l})=>{const c=1===t?"item":"items";return n.a.createElement("footer",{className:"footer"},n.a.createElement("span",{className:"todo-count"},n.a.createElement("strong",null,t||"No")," ",c," left"),n.a.createElement("ul",{className:"filters"},Object.keys(h).map(t=>n.a.createElement("li",{key:t},n.a.createElement("a",{className:r()({selected:t===e}),style:{cursor:"pointer"},onClick:()=>a(t)},h[t])))),!!o&&n.a.createElement("button",{className:"clear-completed",onClick:l},"Clear completed"))};class u extends a.Component{constructor(...e){super(...e),this.state={editing:!1},this.handleDoubleClick=()=>{this.setState({editing:!0})},this.handleSave=(e,t)=>{0===t.length?this.props.deleteTodo(e._id):this.props.editTodo(e,t),this.setState({editing:!1})}}render(){const e=this.props,t=e.todo,o=e.toggleTodo,a=e.deleteTodo;let l;return l=this.state.editing?n.a.createElement(d,{text:t.text,editing:this.state.editing,onSave:e=>this.handleSave(t,e)}):n.a.createElement("div",{className:"view"},n.a.createElement("input",{className:"toggle",type:"checkbox",checked:t.completed,onChange:()=>o(t._id)}),n.a.createElement("label",{onDoubleClick:this.handleDoubleClick},t.text),n.a.createElement("button",{className:"destroy",onClick:()=>a(t._id)})),n.a.createElement("li",{key:r()({id:t._id}),className:r()({completed:t.completed,editing:this.state.editing})},l)}}var g=({todos:e,editTodo:t,deleteTodo:o,toggleTodo:a})=>n.a.createElement("ul",{className:"todo-list"},e.map(e=>n.a.createElement(u,{key:e.id,todo:e,editTodo:t,toggleTodo:a,deleteTodo:o})));var E=({todos:e,deleteTodo:t,editTodo:o,toggleTodo:l,toggleAllTodo:c,clearCompleted:s})=>{const r=Object(a.useState)("show_all"),d=Object(i.a)(r,2),p=d[0],h=d[1],u=e.length,E=e.filter(({completed:e})=>e).length;let b;switch(p){case"show_all":b=e;break;case"show_completed":b=e.filter(e=>e.completed);break;case"show_active":b=e.filter(e=>!e.completed);break;default:throw new Error("Unknown filter: "+p)}return n.a.createElement("section",{className:"main"},!!u&&n.a.createElement("span",null,n.a.createElement("input",{className:"toggle-all",type:"checkbox",checked:E===u,readOnly:!0}),n.a.createElement("label",{onClick:c})),n.a.createElement(g,{todos:b,deleteTodo:t,editTodo:o,toggleTodo:l}),!!u&&n.a.createElement(m,{visibilityFilter:p,setFilter:h,completedCount:E,activeCount:u-E,clearCompleted:s}))};var b=()=>n.a.createElement("div",{style:{textAlign:"center",fontSize:"16px"}},n.a.createElement("h2",null,"Error of reading or writing file on server"));var T=()=>{const e=Object(a.useState)([]),t=Object(i.a)(e,2),o=t[0],l=t[1],s=Object(a.useState)(!1),r=Object(i.a)(s,2),d=r[0],h=r[1];Object(a.useEffect)(()=>{m()},[]);const m=()=>{fetch("/api",{mode:"no-cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer: token"}}).then(e=>{if(e.ok)return e.json();h(!0)}).then(e=>l(e))};return n.a.createElement("div",null,!d&&n.a.createElement(n.a.Fragment,null,n.a.createElement(p,{addTodo:e=>{const t={_id:Math.random(),text:e,completed:!1};fetch("/api",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer: token"},body:JSON.stringify(t)}).then(e=>{if(e.ok)return e.json();h(!0)}).then(e=>l([...o,e]))}}),n.a.createElement(E,{todos:o,deleteTodo:e=>{fetch("/api/todo/".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer: token"},body:JSON.stringify({id:e})}).then(e=>{if(e.ok)return e.json();h(!0)}).then(()=>{m(),l(o)})},editTodo:(e,t)=>{const a={text:t,_id:e._id,completed:e.completed};fetch("/api/todo/".concat(e._id),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer: token"},body:JSON.stringify(a)}).then(e=>{if(e.ok)return e.json();h(!0)}).then(e=>{l(o.map(t=>t._id===e._id?e:t))})},toggleTodo:e=>{l(o.map(t=>t._id===e?Object(c.a)(Object(c.a)({},t),{},{completed:!t.completed}):t))},toggleAllTodo:()=>{const e=o.every(e=>e.completed);l(o.map(t=>Object(c.a)(Object(c.a)({},t),{},{completed:!e})))},clearCompleted:()=>{l(o.filter(e=>!1===e.completed))}})),d&&n.a.createElement(b,null))};Object(l.render)(n.a.createElement(T,null),document.getElementById("root"))},6:function(e,t,o){e.exports=o(12)}},[[6,1,2]]]);
//# sourceMappingURL=main.bc976e54.chunk.js.map