(this.webpackJsonptodomvc=this.webpackJsonptodomvc||[]).push([[0],{40:function(e,t,a){e.exports=a(85)},85:function(e,t,a){"use strict";a.r(t);var o=a(0),l=a.n(o),s=a(11),c=a(3),n=a.n(c);class d extends o.Component{constructor(...e){super(...e),this.state={text:this.props.text||""},this.handleSubmit=e=>{const t=e.target.value.trim();13===e.which&&(this.props.onSave(t),this.props.newTodo&&this.setState({text:""}))},this.handleChange=e=>{this.setState({text:e.target.value})},this.handleBlur=e=>{this.props.newTodo||this.props.onSave(e.target.value)}}render(){return l.a.createElement("input",{className:n()({edit:this.props.editing,"new-todo":this.props.newTodo}),type:"text",placeholder:this.props.placeholder,autoFocus:!0,value:this.state.text,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleSubmit})}}var i=a(5),r=a.n(i),p=a(35);var h=a.n(p)()("http://localhost:8000",{transports:["websocket","polling","flashsocket"]});const m="http://localhost:8000/api/",u=()=>e=>r.a.get("".concat(m)).end((t,a)=>{e(t?{type:"GET_TODOS",data:[]}:{type:"GET_TODOS",data:JSON.parse(a.text)})});var E=()=>l.a.createElement("header",{className:"header"},l.a.createElement("h1",null,"todos"),l.a.createElement(d,{newTodo:!0,onSave:e=>{0!==e.length&&S.dispatch((e=>t=>r.a.post("".concat(m,"todo")).send({_id:Math.random(),text:e,completed:!1}).set("Accept","application/json").end((a,o)=>{h.emit("todo added"),t({type:"ADD_TODO",_id:Math.random(),text:e,completed:!1})}))(e))},placeholder:"What needs to be done?"})),O=a(39);const _={show_all:"All",show_active:"Active",show_completed:"Completed"};var b=({visibilityFilter:e,activeCount:t,completedCount:a,setFilter:o})=>{const s=1===t?"item":"items";return l.a.createElement("footer",{className:"footer"},l.a.createElement("span",{className:"todo-count"},l.a.createElement("strong",null,t||"No")," ",s," left"),l.a.createElement("ul",{className:"filters"},Object.keys(_).map(t=>l.a.createElement("li",{key:t},l.a.createElement("a",{className:n()({selected:t===e}),style:{cursor:"pointer"},onClick:()=>o(t)},_[t])))),!!a&&l.a.createElement("button",{className:"clear-completed",onClick:()=>{S.dispatch(e=>r.a.delete("".concat(m,"/todo/complete/all")).send({id:123}).end((t,a)=>e({type:"CLEAR_COMPLETED"})))}},"Clear completed"))},T=a(1),v=a(6);class g extends o.Component{constructor(...e){super(...e),this.state={editing:!1},this.handleDoubleClick=()=>{this.setState({editing:!0})},this.handleSave=e=>{const t=this.props.todo;0===t.text.length?this.props.deleteTodo(t.id):this.props.editTodo(Object(T.a)(Object(T.a)({},t),{},{text:e})),this.setState({editing:!1})},this.handleDelete=()=>{const e=this.props.todo;this.props.deleteTodo(e)},this.handleCompleteTodo=()=>{const e=this.props.todo;this.props.completeTodo(e._id,!e.completed)}}render(){const e=this.props.todo;let t;return t=this.state.editing?l.a.createElement(d,{text:e.text,editing:this.state.editing,onSave:this.handleSave}):l.a.createElement("div",{className:"view"},l.a.createElement("input",{className:"toggle",type:"checkbox",checked:e.completed,onChange:this.handleCompleteTodo}),l.a.createElement("label",{onDoubleClick:this.handleDoubleClick},e.text),l.a.createElement("button",{className:"destroy",onClick:this.handleDelete})),l.a.createElement("li",{key:n()({id:e._id}),className:n()({completed:e.completed,editing:this.state.editing})},t)}}var D=Object(v.b)(null,{editTodo:e=>t=>r.a.put("".concat(m,"/todo/").concat(e._id)).send(e).set("Accept","application/json").end((a,o)=>{t({type:"EDIT_TODO",_id:e._id,text:e.text})}),deleteTodo:({_id:e})=>t=>r.a.delete("".concat(m,"/todo/").concat(e)).send({_id:e}).set("Accept","application/json").end((a,o)=>{t({type:"DELETE_TODO",_id:e})}),completeTodo:(e,t)=>a=>r.a.put("".concat(m,"/todo/complete/").concat(e)).send({_id:e,completed:t}).end((o,l)=>a({type:"COMPLETE_TODO",_id:e,completed:t}))})(g);var C=({todos:e})=>l.a.createElement("ul",{className:"todo-list"},e.map(e=>l.a.createElement(D,{key:e._id,todo:e})));var x=Object(v.b)(e=>({todos:e.todos}))(({todos:e})=>{const t=Object(o.useState)("show_all"),a=Object(O.a)(t,2),s=a[0],c=a[1];Object(o.useEffect)(()=>{S.dispatch(u()),h.on("Data changed",()=>{S.dispatch(u())})},[]);const n=e.length,d=e.filter(({completed:e})=>e).length;let i;switch(s){case"show_all":i=e;break;case"show_completed":i=e.filter(e=>e.completed);break;case"show_active":i=e.filter(e=>!e.completed);break;default:throw new Error("Unknown filter: "+s)}return l.a.createElement("section",{className:"main"},!!n&&l.a.createElement("span",null,l.a.createElement("input",{className:"toggle-all",type:"checkbox",checked:d===n,readOnly:!0})),l.a.createElement(C,{todos:i}),!!n&&l.a.createElement(b,{visibilityFilter:s,setFilter:c,completedCount:d,activeCount:n-d}))});var w=()=>l.a.createElement("div",null,l.a.createElement(E,null),l.a.createElement(x,null)),k=(a(84),a(38)),y=a(4);var f=Object(y.c)({todos:function(e=[],t){switch(t.type){case"GET_TODOS":return[...t.data];case"ADD_TODO":return[{_id:t._id,completed:t.completed,text:t.text},...e];case"DELETE_TODO":return e.filter(e=>e._id!==t._id);case"EDIT_TODO":return e.map(e=>e._id===t._id?Object(T.a)(Object(T.a)({},e),{},{text:t.text}):e);case"COMPLETE_TODO":return e.map(e=>e._id===t._id?Object(T.a)(Object(T.a)({},e),{},{completed:t.completed}):e);case"CLEAR_COMPLETED":return e.filter(e=>!1===e.completed);default:return e}}});const j=Object(y.d)(f,Object(y.a)(k.a));var S=t.default=j;Object(s.render)(l.a.createElement(v.a,{store:j},l.a.createElement(w,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.6f70131f.chunk.js.map