(this.webpackJsonptodomvc=this.webpackJsonptodomvc||[]).push([[0],{113:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(12),c=r(10),s=r.n(c);class l extends a.Component{constructor(...e){super(...e),this.state={text:this.props.text||""},this.handleSubmit=e=>{const t=e.target.value.trim();13===e.which&&(this.props.onSave(t),this.props.newTodo&&this.setState({text:""}))},this.handleChange=e=>{this.setState({text:e.target.value})},this.handleBlur=e=>{this.props.newTodo||this.props.onSave(e.target.value)}}render(){return n.a.createElement("input",{className:s()({edit:this.props.editing,"new-todo":this.props.newTodo}),type:"text",placeholder:this.props.placeholder,autoFocus:!0,value:this.state.text,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleSubmit})}}var i=r(9),d=r(5),p=r.n(d),u=r(13),h=r(7),m=r(14),b=r.n(m);const v="http://localhost:8000/api/",f=Object(h.b)("GET_TODOS",Object(u.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(v));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),E=Object(h.b)("ADD_TODO",function(){var e=Object(u.a)(p.a.mark((function e(t,{rejectWithValue:r}){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat(v,"todo"),{id:Math.random(),text:t,completed:!1});case 3:return e.sent,e.abrupt("return",{id:Math.random(),text:t,completed:!1});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),O=Object(h.b)("DELETE_TODO",function(){var e=Object(u.a)(p.a.mark((function e({id:t},{rejectWithValue:r}){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat(v,"todo/").concat(t),{id:t});case 3:return e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),x=Object(h.b)("EDIT_TODO",function(){var e=Object(u.a)(p.a.mark((function e(t,{rejectWithValue:r}){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.put("".concat(v,"todo/").concat(t.id),Object(i.a)({},t));case 3:return e.sent,e.abrupt("return",{id:t.id,text:t.text});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),j=Object(h.b)("COMPLETE_TODO",function(){var e=Object(u.a)(p.a.mark((function e(t,{rejectWithValue:r}){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.put("".concat(v,"todo/complete/").concat(t),{id:t});case 3:return e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),w=Object(h.c)({name:"todos",initialState:{todos:[],error:null},reducers:{resetError(e){e.error=""}},extraReducers:{[f.fulfilled]:(e,t)=>{e.todos=t.payload},[E.fulfilled]:(e,t)=>{e.todos.push(t.payload)},[E.rejected]:(e,t)=>{t.payload?e.error=t.payload:e.error="Error in connection with server. Check your internet connection"},[O.fulfilled]:(e,t)=>{e.todos=e.todos.filter(e=>e.id!==t.payload)},[O.rejected]:(e,t)=>{t.payload?e.error=t.payload:e.error="Error in connection with server. Check your internet connection"},[x.fulfilled]:(e,t)=>{const r=t.payload,a=r.id,n=r.text;e.todos=e.todos.map(e=>e.id===a?Object(i.a)(Object(i.a)({},e),{},{text:n}):e)},[x.rejected]:(e,t)=>{t.payload?e.error=t.payload:e.error="Error in connection with server. Check your internet connection"},[j.fulfilled]:(e,t)=>{e.todos=e.todos.map(e=>{const r=!0!==e.completed;return e.id===t.payload?Object(i.a)(Object(i.a)({},e),{},{completed:r}):e})},[j.rejected]:(e,t)=>{t.payload?e.error=t.payload:e.error="Error in connection with server. Check your internet connection"}}}),y=w.actions.resetError;class g extends n.a.Component{constructor(...e){super(...e),this.handleSave=e=>{0!==e.length&&K.dispatch(E(e))}}render(){return n.a.createElement("header",{className:"header"},n.a.createElement("h1",null,"todos"),n.a.createElement(l,{newTodo:!0,onSave:this.handleSave,placeholder:"What needs to be done?"}))}}var k=g,C=r(52);const T={show_all:"All",show_active:"Active",show_completed:"Completed"};var S=({visibilityFilter:e,activeCount:t,setFilter:r})=>{const a=1===t?"item":"items";return n.a.createElement("footer",{className:"footer"},n.a.createElement("span",{className:"todo-count"},n.a.createElement("strong",null,t||"No")," ",a," left"),n.a.createElement("ul",{className:"filters"},Object.keys(T).map(t=>n.a.createElement("li",{key:t},n.a.createElement("a",{className:s()({selected:t===e}),style:{cursor:"pointer"},onClick:()=>r(t)},T[t])))))},D=r(8);class N extends a.Component{constructor(...e){super(...e),this.state={editing:!1},this.handleDoubleClick=()=>{this.setState({editing:!0})},this.handleSave=e=>{const t=this.props.todo;0===t.text.length?this.props.deleteTodo(t):this.props.editTodo(Object(i.a)(Object(i.a)({},t),{},{text:e})),this.setState({editing:!1})},this.handleDelete=()=>{const e=this.props.todo;this.props.deleteTodo(e)},this.handleCompleteTodo=()=>{const e=this.props.todo;this.props.completeTodo(e.id)}}render(){const e=this.props.todo;let t;return t=this.state.editing?n.a.createElement(l,{text:e.text,editing:this.state.editing,onSave:this.handleSave}):n.a.createElement("div",{className:"view"},n.a.createElement("input",{className:"toggle",type:"checkbox",checked:e.completed,onChange:this.handleCompleteTodo}),n.a.createElement("label",{onDoubleClick:this.handleDoubleClick},e.text),n.a.createElement("button",{className:"destroy",onClick:this.handleDelete})),n.a.createElement("li",{key:s()({id:e.id}),className:s()({completed:e.completed,editing:this.state.editing})},t)}}var _=Object(D.b)(null,{editTodo:x,deleteTodo:O,completeTodo:j})(N);var R=({todos:e})=>n.a.createElement("ul",{className:"todo-list"},e.map(e=>n.a.createElement(_,{key:e.id,todo:e}))),F=r(50);var W=r.n(F)()("http://localhost:8000",{transports:["websocket","polling","flashsocket"]});var B=r(51),V=r.n(B);class A extends n.a.Component{constructor(...e){super(...e),this.handleResetError=()=>{this.props.resetError()}}render(){return this.props.error?n.a.createElement("div",{style:{position:"fixed",top:0,left:"50%",fontSize:20,transform:"translateX(-50%)",padding:10,backgroundColor:"#ffcccc",boxShadow:"0 3px 25px -10px rgba(0,0,0,0.5)",display:"flex",alignItems:"center"}},this.props.error,"\xa0",n.a.createElement(V.a,{className:"material-icons",style:{cursor:"pointer"},onClick:this.handleResetError},"close")):null}}var I=Object(D.b)(e=>e.todoReducer,{resetError:y})(A);var M=Object(D.b)(e=>e.todoReducer)(({todos:e})=>{const t=Object(D.c)(),r=Object(a.useState)("show_all"),o=Object(C.a)(r,2),c=o[0],s=o[1];Object(a.useEffect)(()=>{W.on("Change",()=>{t(f())})},[t]);const l=e.length,i=e.filter(({completed:e})=>e).length;let d;switch(c){case"show_all":d=e;break;case"show_completed":d=e.filter(e=>e.completed);break;case"show_active":d=e.filter(e=>!e.completed);break;default:throw new Error("Unknown filter: "+c)}return n.a.createElement("section",{className:"main"},!!l&&n.a.createElement("span",null,n.a.createElement("input",{className:"toggle-all",type:"checkbox",checked:i===l,readOnly:!0})),n.a.createElement(I,null),n.a.createElement(R,{todos:d}),!!l&&n.a.createElement(S,{visibilityFilter:c,setFilter:s,activeCount:l-i}))});var J=()=>n.a.createElement("div",null,n.a.createElement(k,null),n.a.createElement(M,null)),L=(r(111),r(3));var z=Object(L.c)({todoReducer:w.reducer});const G=Object(h.a)({reducer:z,middleware:[...Object(h.d)()]});var K=t.default=G;Object(o.render)(n.a.createElement(D.a,{store:G},n.a.createElement(J,null)),document.getElementById("root"))},54:function(e,t,r){e.exports=r(113)}},[[54,1,2]]]);
//# sourceMappingURL=main.d12c1119.chunk.js.map